# Default config for ElyOS
# Version 0.0.4 - Fixed Input, Audio, and Autostart

# ─────────────────────────────────────────────────────────────
# CORE PLUGINS & SETTINGS
# ─────────────────────────────────────────────────────────────

[core]
plugins = \
  alpha \
  animate \
  autostart \
  command \
  cube \
  expo \
  fast-switcher \
  fisheye \
  foreign-toplevel \
  grid \
  gtk-shell \
  idle \
  invert \
  move \
  oswitch \
  pixdecor \
  place \
  resize \
  session-lock \
  shortcuts-inhibit \
  simple-tile \
  switcher \
  vswitch \
  wayfire-shell \
  window-rules \
  wm-actions \
  wobbly \
  wrot \
  zoom

# Close focused window
close_top_view = <super> KEY_Q | <alt> KEY_F4

# Workspace grid (3 × 3)
vwidth = 3
vheight = 3

# Decoration mode: server = Wayfire draws borders, client = apps draw their own
preferred_decoration_mode = server

# ─────────────────────────────────────────────────────────────
# OUTPUT & DISPLAY (HiDPI SCALING)
# ─────────────────────────────────────────────────────────────

[output:eDP-1]
# Scale factor for 2880x1800 display (1.5 = 1920x1200 effective)
scale = 1.5

# ─────────────────────────────────────────────────────────────
# INPUT DEVICES (TOUCHPAD & MOUSE)
# ─────────────────────────────────────────────────────────────

[input]
# Enable natural scrolling globally
natural_scroll = true
touchpad_natural_scroll = true

# Standard touchpad quality-of-life settings
touchpad_tap_to_click = true
click_method = default

# ─────────────────────────────────────────────────────────────
# WINDOW MANAGEMENT
# ─────────────────────────────────────────────────────────────

[move]
activate = <super> BTN_LEFT

[resize]
activate = <super> BTN_RIGHT

[place]
# Auto-center new windows
mode = center

# ─────────────────────────────────────────────────────────────
# WINDOW RULES (APP-SPECIFIC SETTINGS)
# ─────────────────────────────────────────────────────────────

[window-rules]
# Force Firefox to use server-side decorations
firefox_ssd = app-id is "firefox" & decoration_mode = server

# Remove titlebars from kitty (clean look)
# Note: Pixdecor will NOT round the corners of Kitty because of this rule!
kitty_notitle = app-id is "kitty" & decoration_mode = none

# ─────────────────────────────────────────────────────────────
# WINDOW DECORATIONS & FOCUS BORDERS (PIXDECOR)
# ─────────────────────────────────────────────────────────────

[pixdecor]
# Border thickness in pixels
border_size = 5

# Focused window border (Cyan)
fg_color = 0.0 1.0 1.0 1.0

# Unfocused window border (Dark Gray)
bg_color = 0.2 0.2 0.2 1.0

# Show borders even on maximized windows
maximized_borders = true

# Rounded corners (will only apply to windows with server-side decorations)
rounded_corner_radius = 20

# ─────────────────────────────────────────────────────────────
# GRID SNAPPING (SUPER + ARROWS)
# ─────────────────────────────────────────────────────────────

[grid]
# Snap to left half
slot_bl = <super> KEY_LEFT
# Snap to right half
slot_br = <super> KEY_RIGHT
# Snap to top half
slot_tl = <super> KEY_UP
# Snap to bottom half
slot_bottom = <super> KEY_DOWN
# Maximize
slot_top = <super> KEY_0
# Center/restore
slot_center = <super> KEY_C

# ─────────────────────────────────────────────────────────────
# TILING WM MODE (SUPER + J/K)
# ─────────────────────────────────────────────────────────────

[simple-tile]
# Toggle tiling mode
toggle = <super> KEY_T
# Focus next window
focus_next = <super> KEY_J
# Focus previous window
focus_previous = <super> KEY_K
# Swap with next window
swap_next = <super> <shift> KEY_J
# Swap with previous window
swap_previous = <super> <shift> KEY_K

# ─────────────────────────────────────────────────────────────
# VISUAL EFFECTS & EYE CANDY
# ─────────────────────────────────────────────────────────────

[zoom]
modifier = <super>

[alpha]
modifier = <super> <alt>

[wrot]
activate = <super> <ctrl> BTN_RIGHT

[fisheye]
toggle = <super> <ctrl> KEY_F

[invert]
toggle = <super> KEY_I

# ─────────────────────────────────────────────────────────────
# WORKSPACE NAVIGATION
# ─────────────────────────────────────────────────────────────

[switcher]
next_view = <alt> KEY_TAB
prev_view = <alt> <shift> KEY_TAB

[vswitch]
# Switch workspace (Ctrl+Super+Arrows)
binding_left = <ctrl> <super> KEY_LEFT
binding_down = <ctrl> <super> KEY_DOWN
binding_up = <ctrl> <super> KEY_UP
binding_right = <ctrl> <super> KEY_RIGHT

# Move window to workspace (Ctrl+Super+Shift+Arrows)
with_win_left = <ctrl> <super> <shift> KEY_LEFT
with_win_down = <ctrl> <super> <shift> KEY_DOWN
with_win_up = <ctrl> <super> <shift> KEY_UP
with_win_right = <ctrl> <super> <shift> KEY_RIGHT

[cube]
activate = <ctrl> <alt> BTN_LEFT

[expo]
toggle = <super> KEY_E
select_workspace_1 = KEY_1
select_workspace_2 = KEY_2
select_workspace_3 = KEY_3
select_workspace_4 = KEY_4
select_workspace_5 = KEY_5
select_workspace_6 = KEY_6
select_workspace_7 = KEY_7
select_workspace_8 = KEY_8
select_workspace_9 = KEY_9

[oswitch]
# Switch to next output
next_output = <super> KEY_O
# Switch output with focused window
next_output_with_win = <super> <shift> KEY_O

# ─────────────────────────────────────────────────────────────
# AUTOSTART APPLICATIONS & SERVICES
# ─────────────────────────────────────────────────────────────

[autostart]
0_env = dbus-update-activation-environment --systemd WAYLAND_DISPLAY DISPLAY XAUTHORITY
firefox_wayland = MOZ_ENABLE_WAYLAND=1
autostart_wf_shell = false
outputs = kanshi
notifications = mako
portal = /usr/libexec/xdg-desktop-portal
waybar = waybar
wallpaper = swaybg -i /home/ely/Pictures/wallpapers/wallpaper.jpg
polkit = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
network = nm-applet --indicator

# ─────────────────────────────────────────────────────────────
# KEYBINDINGS & COMMANDS
# ─────────────────────────────────────────────────────────────

[command]
# Terminal (Super+Enter)
binding_terminal = <super> KEY_ENTER
command_terminal = kitty

# Settings launcher (Super+Shift+Enter)
binding_settings_launcher = <super> <shift> KEY_ENTER
command_settings_launcher = ~/.local/bin/settings-menu.sh

# Volume controls (Updated for PipeWire)
repeatable_binding_volume_up = KEY_VOLUMEUP
command_volume_up = wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
repeatable_binding_volume_down = KEY_VOLUMEDOWN
command_volume_down = wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
binding_mute = KEY_MUTE
command_mute = wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

# Brightness controls (Typo fixed!)
repeatable_binding_light_up = KEY_BRIGHTNESSUP
command_light_up = light -A 5
repeatable_binding_light_down = KEY_BRIGHTNESSDOWN
command_light_down = light -U 5

# ─────────────────────────────────────────────────────────────
# SHELL & SYSTEM MENU
# ─────────────────────────────────────────────────────────────

[wayfire-shell]
# Open app menu (Super key)
toggle_menu = <super>

# ─────────────────────────────────────────────────────────────
# OPTIONAL: QUICK LOGOUT KEYBIND
# ─────────────────────────────────────────────────────────────
# Uncomment below to add Super+Shift+Esc logout
# binding_logout = <super> <shift> KEY_ESC
# command_logout = pkill wayfire
